generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  //url      = env("DATABASE_URL")
}

enum UserRole {
  novice
  user
  premiun
  shop
  admin
  moderator
}

enum MediaType {
  image
  video
}

model Account {
  id                       Int       @id @default(autoincrement())
  userId                   Int
  type                     String
  access_token             String?   @db.Text
  createdAt                DateTime  @default(now())
  expires_at               Int?
  id_token                 String?   @db.Text
  provider                 String    @db.VarChar(50)
  providerAccountId        String    @db.VarChar(100)
  refresh_token            String?   @db.Text
  refresh_token_expires_in Int?
  scope                    String?
  session_state            String?
  token_type               String?
  updatedAt                DateTime?
  active                   Int?      @default(1) @db.TinyInt
  user                     User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId], map: "Account_provider_providerAccountId_key")
  @@map("account")
}

model PasswordChangeRequest {
  id              Int       @id @default(autoincrement())
  userId          Int
  token           String    @unique
  newPasswordHash String
  expiresAt       DateTime
  confirmedAt     DateTime?
  createdAt       DateTime  @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
}

model SecurityLog {
  id        Int      @id @default(autoincrement())
  userId    Int?
  type      String
  ip        String?
  userAgent String?
  metadata  Json?
  createdAt DateTime @default(now())

  user User? @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([type])
}

model User {
  id                Int       @id @default(autoincrement())
  nick              String?   @unique(map: "username_UNIQUE")
  email             String    @unique(map: "User_email_key")
  name              String
  password          String?
  sessionVersion    Int       @default(1)
  role              UserRole? @default(user)
  emailVerified     DateTime?
  imageUrl          String?
  imagePublicId     String?
  imageWallUrl      String?
  imageWallPublicId String?
  createdAt         DateTime? @default(now())
  updatedAt         DateTime?
  deletedAt         DateTime?
  active            Int?      @default(1) @db.TinyInt

  // Información de perfil extendida
  bio         String?   @db.VarChar(500)
  phoneNumber String?   @unique
  movilNumber String?   @unique
  birthday    DateTime?
  location    String?   @db.VarChar(255)
  // ✅ existentes (no tocar aún)
  country     String?   @db.VarChar(127)
  province    String?   @db.VarChar(127)
  city        String?   @db.VarChar(127)

  // ✅ nuevos IDs (migración)
  countryId  Int?
  provinceId Int?
  cityId     Int?

  street           String? @db.VarChar(127)
  number           String? @db.VarChar(7)
  department       String? @db.VarChar(7)
  mail_code        String? @db.VarChar(10)
  website          String? @db.VarChar(127)
  language         String? @db.VarChar(3)
  occupation       String? @db.VarChar(100)
  company          String? @db.VarChar(100)
  dataVerifiedCode String? @db.VarChar(31)
  dataVerified     Int?    @default(0) @db.TinyInt
  visibility       Int?    @default(1) @db.TinyInt

  // Configuraciones de seguridad
  twoFactorEnabled    Boolean?  @default(false)
  lastLogin           DateTime?
  failedLoginAttempts Int?      @default(0)

  // Redes sociales vinculadas
  twitterHandle   String? @db.VarChar(100)
  facebookHandle  String? @db.VarChar(100)
  instagramHandle String? @db.VarChar(100)
  linkedinHandle  String? @db.VarChar(100)
  githubHandle    String? @db.VarChar(100)

  // Preferencias del usuario
  darkModeEnabled    Boolean? @default(false)
  emailNotifications Boolean? @default(true)
  pushNotifications  Boolean? @default(true)
  themePreference    String?

  // Relaciones con otros modelos
  accounts               Account[]
  posts                  Post[]
  comments               PostComment[]
  imageComments          ImageComment[]
  postCommentsResponses  PostCommentResponse[]
  imageCommentsResponses ImageCommentResponse[]
  followers              Follow[]               @relation("UserFollowers")
  following              Follow[]               @relation("UserFollowing")
  post_like              PostLike[]
  image_like             ImageLike[]
  productListings        ProductListing[]

  // Relaciones con amistades
  friendsInitiated Friendship[] @relation("FriendshipOne")
  friendsReceived  Friendship[] @relation("FriendshipTwo")

  // Métodos de pago o facturación
  stripeCustomerId String?
  paypalEmail      String?

  // Otras relaciones
  productListingComments       ProductListingComment[]
  productListingLikes          ProductListingLike[]
  productListingUnlikes        ProductListingUnlike[]
  postUnlikes                  PostUnlike[]
  imageUnlikes                 ImageUnlike[]
  imageCommentLikes            ImageCommentLike[]
  imageCommentUnlikes          ImageCommentUnlike[]
  imageCommentResponsesLikes   ImageCommentResponseLike[]
  imageCommentResponsesUnlikes ImageCommentResponseUnlike[]
  postCommentLikes             PostCommentLike[]
  postCommentUnlikes           PostCommentUnlike[]
  postCommentResponsesLikes    PostCommentResponseLike[]
  postCommentResponsesUnlikes  PostCommentResponseUnlike[]
  productListingMediaLikes     ProductListingMediaLike[]
  productListingMediaUnlikes   ProductListingMediaUnlike[]
  productListingCommentLikes   ProductListingCommentLike[]
  productListingCommentUnlikes ProductListingCommentUnlike[]
  serviceListings              ServiceListing[]
  serviceListingComments       ServiceListingComment[]
  serviceListingLikes          ServiceListingLike[]
  serviceListingUnlikes        ServiceListingUnlike[]
  serviceListingMediaLikes     ServiceListingMediaLike[]
  serviceListingMediaUnlikes   ServiceListingMediaUnlike[]
  serviceListingCommentLikes   ServiceListingCommentLike[]
  serviceListingCommentUnlikes ServiceListingCommentUnlike[]
  configuration                Configuration?
  passwordChangeRequests       PasswordChangeRequest[]
  securityLogs                 SecurityLog[]

  @@map("user")
}

model Configuration {
  id Int @id @default(autoincrement())

  userId Int  @unique
  user   User @relation(fields: [userId], references: [id], onDelete: Cascade)

  // ---- Perfil ----
  profileImageVisibility Int @default(1)
  coverImageVisibility   Int @default(1)
  fullProfileVisibility  Int @default(1)

  // ---- Muro y contenido ----
  wallVisibility         Int @default(1)
  postsVisibility        Int @default(1)
  postCommentsVisibility Int @default(1)
  postRepliesVisibility  Int @default(1)

  mediaVisibility         Int @default(1)
  mediaCommentsVisibility Int @default(1)
  mediaRepliesVisibility  Int @default(1)

  // ---- Relaciones ----
  friendsListVisibility   Int @default(2)
  followersListVisibility Int @default(1)
  followingListVisibility Int @default(1)

  // ---- Interacciones ----
  likesVisibility           Int @default(1)
  privateMessagesVisibility Int @default(2)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Friendship {
  id              Int      @id @default(autoincrement())
  friend_one      Int
  friend_two      Int
  friend_request  Int      @default(0) @db.TinyInt
  friend_response Int      @default(0) @db.TinyInt
  createdAt       DateTime @default(now())

  friendOne User @relation("FriendshipOne", fields: [friend_one], references: [id], onDelete: Cascade)
  friendTwo User @relation("FriendshipTwo", fields: [friend_two], references: [id], onDelete: Cascade)

  @@unique([friend_one, friend_two])
  @@index([friend_one])
  @@map("friendship")
}

model Post {
  id           Int           @id @default(autoincrement())
  title        String?       @db.VarChar(100)
  description  String?       @db.VarChar(1000)
  imagenumber  Int?          @default(1) @db.TinyInt
  createdAt    DateTime?     @default(now())
  deletedAt    DateTime?
  user_id      Int
  active       Int?          @default(1) @db.TinyInt
  visibility   Int?          @default(1) @db.TinyInt
  user         User          @relation(fields: [user_id], references: [id], onDelete: Cascade)
  images       Image[]
  post_comment PostComment[]
  post_like    PostLike[]
  post_unlike  PostUnlike[]

  @@map("post")
}

model Follow {
  id          Int      @id @default(autoincrement())
  followerId  Int
  followingId Int
  createdAt   DateTime @default(now())

  follower  User @relation("UserFollowers", fields: [followerId], references: [id], onDelete: Cascade)
  following User @relation("UserFollowing", fields: [followingId], references: [id], onDelete: Cascade)

  @@unique([followerId, followingId])
  @@map("follow")
}

model DeletedUser {
  id        Int       @id @default(autoincrement())
  nick      String?
  email     String
  name      String
  role      UserRole?
  createdAt DateTime?
  deletedAt DateTime?

  @@map("deleted_user")
}

model VerificationToken {
  identifier String   @id @unique
  token      String
  expires    DateTime

  @@map("verificationtoken")
}

model ImageComment {
  id           Int                    @id @default(autoincrement())
  comment      String                 @db.VarChar(127)
  createdAt    DateTime               @default(now())
  image_id     Int
  active       Int?                   @default(1) @db.TinyInt
  who_comments Int
  image        Image                  @relation(fields: [image_id], references: [id], onDelete: Cascade)
  user         User                   @relation(fields: [who_comments], references: [id], onDelete: Cascade)
  responses    ImageCommentResponse[]
  likes        ImageCommentLike[]
  unlikes      ImageCommentUnlike[]

  @@map("image_comment")
}

model ImageCommentResponse {
  id               Int                          @id @default(autoincrement())
  response         String                       @db.VarChar(127)
  createdAt        DateTime                     @default(now())
  image_comment_id Int
  active           Int?                         @default(1) @db.TinyInt
  who_responses    Int
  image_comment    ImageComment                 @relation(fields: [image_comment_id], references: [id], onDelete: Cascade)
  user             User                         @relation(fields: [who_responses], references: [id], onDelete: Cascade)
  likes            ImageCommentResponseLike[]
  unlikes          ImageCommentResponseUnlike[]

  @@map("image_comment_responses")
}

model PostComment {
  id           Int                   @id @default(autoincrement())
  comment      String                @db.VarChar(127)
  createdAt    DateTime              @default(now())
  post_id      Int
  active       Int?                  @default(1) @db.TinyInt
  who_comments Int
  post         Post                  @relation(fields: [post_id], references: [id], onDelete: Cascade)
  user         User                  @relation(fields: [who_comments], references: [id], onDelete: Cascade)
  responses    PostCommentResponse[]
  likes        PostCommentLike[]
  unlikes      PostCommentUnlike[]

  @@map("post_comment")
}

model PostCommentResponse {
  id              Int                         @id @default(autoincrement())
  response        String                      @db.VarChar(127)
  createdAt       DateTime                    @default(now())
  post_comment_id Int
  active          Int?                        @default(1) @db.TinyInt
  who_responses   Int
  post_comment    PostComment                 @relation(fields: [post_comment_id], references: [id], onDelete: Cascade)
  user            User                        @relation(fields: [who_responses], references: [id], onDelete: Cascade)
  likes           PostCommentResponseLike[]
  unlikes         PostCommentResponseUnlike[]

  @@map("post_comment_responses")
}

model Image {
  id            Int            @id @default(autoincrement())
  description   String?        @db.VarChar(1000)
  imageUrl      String         @db.VarChar(255)
  imagePublicId String
  createdAt     DateTime       @default(now())
  post_id       Int
  active        Int?           @default(1) @db.TinyInt
  index         Int            @default(1) @db.TinyInt
  post          Post           @relation(fields: [post_id], references: [id], onDelete: Cascade)
  comments      ImageComment[]
  image_like    ImageLike[]
  image_unlike  ImageUnlike[]

  @@unique([post_id, index])
  @@map("image")
}

model PostLike {
  id        Int      @id @default(autoincrement())
  userId    Int
  postId    Int
  createdAt DateTime @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  post Post @relation(fields: [postId], references: [id], onDelete: Cascade)

  @@unique([userId, postId])
  @@map("post_like")
}

model PostUnlike {
  id        Int      @id @default(autoincrement())
  userId    Int
  postId    Int
  createdAt DateTime @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  post Post @relation(fields: [postId], references: [id], onDelete: Cascade)

  @@unique([userId, postId])
  @@map("post_unlike")
}

model ImageLike {
  id        Int      @id @default(autoincrement())
  userId    Int
  imageId   Int
  createdAt DateTime @default(now())

  user  User  @relation(fields: [userId], references: [id], onDelete: Cascade)
  image Image @relation(fields: [imageId], references: [id], onDelete: Cascade)

  @@unique([userId, imageId])
  @@map("image_like")
}

model ImageUnlike {
  id        Int      @id @default(autoincrement())
  userId    Int
  imageId   Int
  createdAt DateTime @default(now())

  user  User  @relation(fields: [userId], references: [id], onDelete: Cascade)
  image Image @relation(fields: [imageId], references: [id], onDelete: Cascade)

  @@unique([userId, imageId])
  @@map("image_unlike")
}

model ImageCommentLike {
  id               Int      @id @default(autoincrement())
  userId           Int
  image_comment_id Int
  createdAt        DateTime @default(now())

  user          User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  image_comment ImageComment @relation(fields: [image_comment_id], references: [id], onDelete: Cascade)

  @@unique([userId, image_comment_id])
  @@map("image_comment_like")
}

model ImageCommentUnlike {
  id               Int      @id @default(autoincrement())
  userId           Int
  image_comment_id Int
  createdAt        DateTime @default(now())

  user          User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  image_comment ImageComment @relation(fields: [image_comment_id], references: [id], onDelete: Cascade)

  @@unique([userId, image_comment_id])
  @@map("image_comment_unlike")
}

model ImageCommentResponseLike {
  id                         Int      @id @default(autoincrement())
  userId                     Int
  image_comment_responses_id Int
  createdAt                  DateTime @default(now())

  user     User                 @relation(fields: [userId], references: [id], onDelete: Cascade)
  response ImageCommentResponse @relation(fields: [image_comment_responses_id], references: [id], onDelete: Cascade)

  @@unique([userId, image_comment_responses_id])
  @@map("image_comment_responses_like")
}

model ImageCommentResponseUnlike {
  id                         Int      @id @default(autoincrement())
  userId                     Int
  image_comment_responses_id Int
  createdAt                  DateTime @default(now())

  user     User                 @relation(fields: [userId], references: [id], onDelete: Cascade)
  response ImageCommentResponse @relation(fields: [image_comment_responses_id], references: [id], onDelete: Cascade)

  @@unique([userId, image_comment_responses_id])
  @@map("image_comment_responses_unlike")
}

model PostCommentLike {
  id              Int      @id @default(autoincrement())
  userId          Int
  post_comment_id Int
  createdAt       DateTime @default(now())

  user        User        @relation(fields: [userId], references: [id], onDelete: Cascade)
  postComment PostComment @relation(fields: [post_comment_id], references: [id], onDelete: Cascade)

  @@unique([userId, post_comment_id])
  @@map("post_comment_like")
}

model PostCommentUnlike {
  id              Int      @id @default(autoincrement())
  userId          Int
  post_comment_id Int
  createdAt       DateTime @default(now())

  user        User        @relation(fields: [userId], references: [id], onDelete: Cascade)
  postComment PostComment @relation(fields: [post_comment_id], references: [id], onDelete: Cascade)

  @@unique([userId, post_comment_id])
  @@map("post_comment_unlike")
}

model PostCommentResponseLike {
  id                        Int      @id @default(autoincrement())
  userId                    Int
  post_comment_responses_id Int
  createdAt                 DateTime @default(now())

  user         User                @relation(fields: [userId], references: [id], onDelete: Cascade)
  response_row PostCommentResponse @relation(fields: [post_comment_responses_id], references: [id], onDelete: Cascade)

  @@unique([userId, post_comment_responses_id])
  @@map("post_comment_responses_like")
}

model PostCommentResponseUnlike {
  id                        Int      @id @default(autoincrement())
  userId                    Int
  post_comment_responses_id Int
  createdAt                 DateTime @default(now())

  user         User                @relation(fields: [userId], references: [id], onDelete: Cascade)
  response_row PostCommentResponse @relation(fields: [post_comment_responses_id], references: [id], onDelete: Cascade)

  @@unique([userId, post_comment_responses_id])
  @@map("post_comment_responses_unlike")
}

model ProductListing {
  id          Int     @id @default(autoincrement())
  title       String? @db.VarChar(100)
  description String? @db.VarChar(500)

  price          Decimal? @db.Decimal(10, 2)
  currency       String?  @db.VarChar(3)
  clarifications String?  @db.VarChar(500)

  medianumber Int?      @default(1) @db.TinyInt
  createdAt   DateTime  @default(now())
  deletedAt   DateTime?
  user_id     Int
  active      Int?      @default(1) @db.TinyInt
  visibility  Int?      @default(1) @db.TinyInt

  user User @relation(fields: [user_id], references: [id], onDelete: Cascade)

  media    ProductListingMedia[]
  comments ProductListingComment[]
  likes    ProductListingLike[]
  unlikes  ProductListingUnlike[]

  @@index([user_id])
  @@map("product_listing")
}

model ProductListingMedia {
  id Int @id @default(autoincrement())

  type MediaType @default(image)

  url      String @db.VarChar(255)
  publicId String @db.VarChar(255)

  thumbnailUrl      String? @db.VarChar(255)
  thumbnailPublicId String? @db.VarChar(255)
  durationSec       Int?
  format            String? @db.VarChar(20)

  createdAt          DateTime @default(now())
  product_listing_id Int
  active             Int?     @default(1) @db.TinyInt
  index              Int      @default(1) @db.TinyInt

  listing ProductListing              @relation(fields: [product_listing_id], references: [id], onDelete: Cascade)
  likes   ProductListingMediaLike[]
  unlikes ProductListingMediaUnlike[]

  @@unique([product_listing_id, index])
  @@index([product_listing_id])
  @@map("product_listing_media")
}

model ProductListingComment {
  id                 Int      @id @default(autoincrement())
  comment            String   @db.VarChar(255)
  createdAt          DateTime @default(now())
  product_listing_id Int
  active             Int?     @default(1) @db.TinyInt
  who_comments       Int

  listing ProductListing                @relation(fields: [product_listing_id], references: [id], onDelete: Cascade)
  user    User                          @relation(fields: [who_comments], references: [id], onDelete: Cascade)
  likes   ProductListingCommentLike[]
  unlikes ProductListingCommentUnlike[]

  @@index([product_listing_id])
  @@index([who_comments])
  @@map("product_listing_comment")
}

model ProductListingLike {
  id               Int      @id @default(autoincrement())
  userId           Int
  productListingId Int
  createdAt        DateTime @default(now())

  user    User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  listing ProductListing @relation(fields: [productListingId], references: [id], onDelete: Cascade)

  @@unique([userId, productListingId])
  @@index([productListingId])
  @@map("product_listing_like")
}

model ProductListingUnlike {
  id               Int      @id @default(autoincrement())
  userId           Int
  productListingId Int
  createdAt        DateTime @default(now())

  user    User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  listing ProductListing @relation(fields: [productListingId], references: [id], onDelete: Cascade)

  @@unique([userId, productListingId])
  @@index([productListingId])
  @@map("product_listing_unlike")
}

model ProductListingMediaLike {
  id                    Int      @id @default(autoincrement())
  userId                Int
  productListingMediaId Int
  createdAt             DateTime @default(now())

  user  User                @relation(fields: [userId], references: [id], onDelete: Cascade)
  media ProductListingMedia @relation(fields: [productListingMediaId], references: [id], onDelete: Cascade)

  @@unique([userId, productListingMediaId])
  @@index([productListingMediaId])
  @@map("product_listing_media_like")
}

model ProductListingMediaUnlike {
  id                    Int      @id @default(autoincrement())
  userId                Int
  productListingMediaId Int
  createdAt             DateTime @default(now())

  user  User                @relation(fields: [userId], references: [id], onDelete: Cascade)
  media ProductListingMedia @relation(fields: [productListingMediaId], references: [id], onDelete: Cascade)

  @@unique([userId, productListingMediaId])
  @@index([productListingMediaId])
  @@map("product_listing_media_unlike")
}

model ProductListingCommentLike {
  id                      Int      @id @default(autoincrement())
  userId                  Int
  productListingCommentId Int
  createdAt               DateTime @default(now())

  user    User                  @relation(fields: [userId], references: [id], onDelete: Cascade)
  comment ProductListingComment @relation(fields: [productListingCommentId], references: [id], onDelete: Cascade)

  @@unique([userId, productListingCommentId])
  @@index([productListingCommentId])
  @@map("product_listing_comment_like")
}

model ProductListingCommentUnlike {
  id                      Int      @id @default(autoincrement())
  userId                  Int
  productListingCommentId Int
  createdAt               DateTime @default(now())

  user    User                  @relation(fields: [userId], references: [id], onDelete: Cascade)
  comment ProductListingComment @relation(fields: [productListingCommentId], references: [id], onDelete: Cascade)

  @@unique([userId, productListingCommentId])
  @@index([productListingCommentId])
  @@map("product_listing_comment_unlike")
}

model ServiceListing {
  id          Int     @id @default(autoincrement())
  title       String? @db.VarChar(100)
  description String? @db.VarChar(500)

  // precio del servicio (por hora, por trabajo, etc.)
  price    Decimal? @db.Decimal(10, 2)
  currency String?  @db.VarChar(3) // ej: "ARS", "USD"

  clarifications String? @db.VarChar(500)

  // campos específicos de servicios
  durationMinutes Int? // duración estimada (ej: 60, 90, 120)
  modality        String? @db.VarChar(50) // "online", "presencial", "híbrido"
  location        String? @db.VarChar(255) // zona/barrio/ciudad

  medianumber Int?      @default(1) @db.TinyInt
  createdAt   DateTime  @default(now())
  deletedAt   DateTime?
  user_id     Int
  active      Int?      @default(1) @db.TinyInt
  visibility  Int?      @default(1) @db.TinyInt

  user User @relation(fields: [user_id], references: [id], onDelete: Cascade)

  media    ServiceListingMedia[]
  comments ServiceListingComment[]
  likes    ServiceListingLike[]
  unlikes  ServiceListingUnlike[]

  @@index([user_id])
  @@map("service_listing")
}

model ServiceListingMedia {
  id Int @id @default(autoincrement())

  type MediaType @default(image)

  url      String @db.VarChar(255)
  publicId String @db.VarChar(255)

  thumbnailUrl      String? @db.VarChar(255)
  thumbnailPublicId String? @db.VarChar(255)
  durationSec       Int?
  format            String? @db.VarChar(20)

  createdAt          DateTime @default(now())
  service_listing_id Int
  active             Int?     @default(1) @db.TinyInt
  index              Int      @default(1) @db.TinyInt

  listing ServiceListing              @relation(fields: [service_listing_id], references: [id], onDelete: Cascade)
  likes   ServiceListingMediaLike[]
  unlikes ServiceListingMediaUnlike[]

  @@unique([service_listing_id, index])
  @@index([service_listing_id])
  @@map("service_listing_media")
}

model ServiceListingComment {
  id                 Int      @id @default(autoincrement())
  comment            String   @db.VarChar(255)
  createdAt          DateTime @default(now())
  service_listing_id Int
  active             Int?     @default(1) @db.TinyInt
  who_comments       Int

  listing ServiceListing                @relation(fields: [service_listing_id], references: [id], onDelete: Cascade)
  user    User                          @relation(fields: [who_comments], references: [id], onDelete: Cascade)
  likes   ServiceListingCommentLike[]
  unlikes ServiceListingCommentUnlike[]

  @@index([service_listing_id])
  @@index([who_comments])
  @@map("service_listing_comment")
}

model ServiceListingLike {
  id               Int      @id @default(autoincrement())
  userId           Int
  serviceListingId Int
  createdAt        DateTime @default(now())

  user    User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  listing ServiceListing @relation(fields: [serviceListingId], references: [id], onDelete: Cascade)

  @@unique([userId, serviceListingId])
  @@index([serviceListingId])
  @@map("service_listing_like")
}

model ServiceListingUnlike {
  id               Int      @id @default(autoincrement())
  userId           Int
  serviceListingId Int
  createdAt        DateTime @default(now())

  user    User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  listing ServiceListing @relation(fields: [serviceListingId], references: [id], onDelete: Cascade)

  @@unique([userId, serviceListingId])
  @@index([serviceListingId])
  @@map("service_listing_unlike")
}

model ServiceListingMediaLike {
  id                    Int      @id @default(autoincrement())
  userId                Int
  serviceListingMediaId Int
  createdAt             DateTime @default(now())

  user  User                @relation(fields: [userId], references: [id], onDelete: Cascade)
  media ServiceListingMedia @relation(fields: [serviceListingMediaId], references: [id], onDelete: Cascade)

  @@unique([userId, serviceListingMediaId])
  @@index([serviceListingMediaId])
  @@map("service_listing_media_like")
}

model ServiceListingMediaUnlike {
  id                    Int      @id @default(autoincrement())
  userId                Int
  serviceListingMediaId Int
  createdAt             DateTime @default(now())

  user  User                @relation(fields: [userId], references: [id], onDelete: Cascade)
  media ServiceListingMedia @relation(fields: [serviceListingMediaId], references: [id], onDelete: Cascade)

  @@unique([userId, serviceListingMediaId])
  @@index([serviceListingMediaId])
  @@map("service_listing_media_unlike")
}

model ServiceListingCommentLike {
  id                      Int      @id @default(autoincrement())
  userId                  Int
  serviceListingCommentId Int
  createdAt               DateTime @default(now())

  user    User                  @relation(fields: [userId], references: [id], onDelete: Cascade)
  comment ServiceListingComment @relation(fields: [serviceListingCommentId], references: [id], onDelete: Cascade)

  @@unique([userId, serviceListingCommentId])
  @@index([serviceListingCommentId])
  @@map("service_listing_comment_like")
}

model ServiceListingCommentUnlike {
  id                      Int      @id @default(autoincrement())
  userId                  Int
  serviceListingCommentId Int
  createdAt               DateTime @default(now())

  user    User                  @relation(fields: [userId], references: [id], onDelete: Cascade)
  comment ServiceListingComment @relation(fields: [serviceListingCommentId], references: [id], onDelete: Cascade)

  @@unique([userId, serviceListingCommentId])
  @@index([serviceListingCommentId])
  @@map("service_listing_comment_unlike")
}
